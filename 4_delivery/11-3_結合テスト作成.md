---
name: çµåˆãƒ†ã‚¹ãƒˆä½œæˆï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼‰
---

# 11-3 : çµåˆãƒ†ã‚¹ãƒˆä½œæˆ - å®Ÿç”¨çš„ãªãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆæ§‹ç¯‰

## ğŸ¯ URLçµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ ã¨Playwrightå­¦ç¿’ãƒŠãƒ¬ãƒƒã‚¸

### âœ… URLçµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ ã®æˆæœ
- **çµ±ä¸€URLè§£æ±º**: `default_parent_url`ã‚’å”¯ä¸€ã®ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨
- **ã‚·ãƒ³ãƒ—ãƒ«ãªå„ªå…ˆé †ä½**: `config.json` â†’ `NOTION_ROOT_URL` ã®2æ®µéšã®ã¿
- **è‡ªå‹•ç§»è¡Œã‚µãƒãƒ¼ãƒˆ**: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è‡ªå‹•ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- **ãƒ¬ã‚¬ã‚·ãƒ¼äº’æ›æ€§**: æ—¢å­˜è¨­å®šã¨ã®äº’æ›æ€§ã‚’ä¿æŒ

### âœ… PlaywrightæˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆ**: Cursor ã‚³ãƒãƒ³ãƒ‰ï¼ˆCLIå®Ÿè¡Œï¼‰ + Playwrightï¼ˆUIæ¤œè¨¼ï¼‰ã‚’äº¤äº’ã«å®Ÿè¡Œ
- **çµ±ä¸€URLè§£æ±º**: `config.json`ã®`default_parent_url`ã‹ã‚‰URLã‚’å–å¾—
- **ã‚·ãƒ³ãƒ—ãƒ«ãªã‚»ãƒ¬ã‚¯ã‚¿**: `page.getByRole`, `page.getByText` ã‚’ä½¿ç”¨
- **èªè¨¼å‡¦ç†**: Google SSOã®ã€ŒDaisukeã¨ã—ã¦å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
- **ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿**: `domcontentloaded` + `waitForTimeout` ã®çµ„ã¿åˆã‚ã›

### ğŸ”§ å®Ÿè¨¼æ¸ˆã¿å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
1. **URLè§£æ±º**: `config.json`ã®`default_parent_url`ã‚’å„ªå…ˆä½¿ç”¨
2. **èªè¨¼**: è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ã§ã€ŒDaisukeã¨ã—ã¦å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ç¢ºå®Ÿã«ã‚¯ãƒªãƒƒã‚¯
3. **ã‚»ãƒ¬ã‚¯ã‚¿**: `page.getByRole('heading', { level: 1 })` ãªã©ã€æ„å‘³çš„ãªã‚»ãƒ¬ã‚¯ã‚¿ã‚’å„ªå…ˆ
4. **ç’°å¢ƒå¤‰æ•°**: `TEST_PAGE_URL`, `ROOT_PAGE_URL`, `README_PAGE_URL`ã®è¤‡æ•°ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
5. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†**: ãƒ†ã‚¹ãƒˆå‰ã®æ˜ç¤ºçš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢

---

## ğŸ¯ Playwrightã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æˆ¦ç•¥ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼ˆ2025-10-16æ›´æ–°ï¼‰

### âœ… UXæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰å­¦ã¶æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³

#### 1. **è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥**

**å•é¡Œ**: Notionã®å‹•çš„ãªDOMæ§‹é€ ã«ã‚ˆã‚Šã€å˜ä¸€ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã¯è¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹

**è§£æ±ºç­–**: UXæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨

```typescript
// âŒ å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³: å˜ä¸€ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã«ä¾å­˜
const documentLink = page.getByRole('link', { name: /^document$/i });
await documentLink.click(); // â†’ å¤±æ•—ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„

// âœ… æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³: è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’é †æ¬¡è©¦è¡Œ
const documentSelectors = [
  'a:has-text("document")',           // ãƒ‘ã‚¿ãƒ¼ãƒ³1: ãƒ†ã‚­ã‚¹ãƒˆã‚’å«ã‚€ãƒªãƒ³ã‚¯
  'a[href*="document"]',              // ãƒ‘ã‚¿ãƒ¼ãƒ³2: hrefå±æ€§ã«documentã‚’å«ã‚€
  '[role="link"]:has-text("document")', // ãƒ‘ã‚¿ãƒ¼ãƒ³3: roleå±æ€§ä»˜ã
  'div:has-text("document")'          // ãƒ‘ã‚¿ãƒ¼ãƒ³4: ãƒªãƒ³ã‚¯ã§ãªãã¦ã‚‚OK
];

let documentLink = null;
for (const selector of documentSelectors) {
  const locator = page.locator(selector).first();
  const count = await locator.count();
  if (count > 0) {
    documentLink = locator;
    console.log(`âœ“ è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ (selector: ${selector})`);
    break;
  }
}

if (documentLink) {
  await documentLink.click();
} else {
  throw new Error('è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
}
```

#### 2. **è¦‹å‡ºã—ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®æŸ”è»Ÿãªæˆ¦ç•¥**

**å•é¡Œ**: `getByRole('heading', { level: 2 })`ã§ã¯æ—¥æœ¬èªã®è¦‹å‡ºã—ãŒè¦‹ã¤ã‹ã‚‰ãªã„

**è§£æ±ºç­–**: è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã¨ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹æ¤œç´¢ã®çµ„ã¿åˆã‚ã›

```typescript
// âŒ å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³
const section = page.getByRole('heading', { level: 2, name: /æ¦‚è¦/i });
await expect(section).toBeVisible(); // â†’ å¤±æ•—

// âœ… æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³: è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§æŸ”è»Ÿã«å¯¾å¿œ
const sections = ['æ¦‚è¦', 'ç›®çš„', 'ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£'];

for (const sectionName of sections) {
  const selectors = [
    `h2:has-text("${sectionName}")`,              // ãƒ‘ã‚¿ãƒ¼ãƒ³1: h2ã‚¿ã‚°
    `[role="heading"]:has-text("${sectionName}")`, // ãƒ‘ã‚¿ãƒ¼ãƒ³2: roleå±æ€§
    `:text("${sectionName}")`                      // ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒ†ã‚­ã‚¹ãƒˆã®ã¿
  ];
  
  let found = false;
  for (const selector of selectors) {
    const locator = page.locator(selector);
    const count = await locator.count();
    if (count > 0) {
      found = true;
      console.log(`âœ“ ${sectionName}ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ (selector: ${selector})`);
      break;
    }
  }
  
  expect(found).toBe(true);
}
```

#### 3. **Strict Mode Violationå¯¾ç­–**

**å•é¡Œ**: æ­£è¦è¡¨ç¾ãŒè¤‡æ•°è¦ç´ ã«ãƒãƒƒãƒã—ã¦`strict mode violation`ã‚¨ãƒ©ãƒ¼

**è§£æ±ºç­–**: `.first()`ã‚’æ˜ç¤ºçš„ã«ä½¿ç”¨

```typescript
// âŒ å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³
const content = page.getByText(/ä»¥ä¸‹ã®ç›®çš„ã‚’é”æˆ|æ‹¡å¼µæ€§ã‚’ç¢ºä¿/);
await expect(content).toBeVisible(); // â†’ Strict mode violation

// âœ… æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³: .first()ã§æœ€åˆã®è¦ç´ ã®ã¿å–å¾—
const content = page.getByText(/ä»¥ä¸‹ã®ç›®çš„ã‚’é”æˆ|æ‹¡å¼µæ€§ã‚’ç¢ºä¿/).first();
await expect(content).toBeVisible(); // â†’ æˆåŠŸ
```

#### 4. **Notionãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼**

**å•é¡Œ**: `getByRole('listitem')`ã§ã¯Notionã®ãƒªã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„

**è§£æ±ºç­–**: Notionå›ºæœ‰ã®ã‚¯ãƒ©ã‚¹åã‚’å«ã‚€è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼

```typescript
// âŒ å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³
const listItems = page.getByRole('listitem');
const count = await listItems.count(); // â†’ 0

// âœ… æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³: Notionå›ºæœ‰ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’å«ã‚ã‚‹
const listSelectors = [
  '[role="listitem"]',
  'ul > li',
  'ol > li',
  '.notion-bulleted_list-block',      // â˜…Notionå›ºæœ‰
  '.notion-numbered_list-block'       // â˜…Notionå›ºæœ‰
];

let listCount = 0;
for (const selector of listSelectors) {
  const items = page.locator(selector);
  const count = await items.count();
  if (count > 0) {
    listCount = count;
    console.log(`âœ“ ${listCount}å€‹ã®ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ  (selector: ${selector})`);
    break;
  }
}
```

#### 5. **Playwrightå®Ÿè¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ­£ã—ã„ä½¿ã„æ–¹**

**å•é¡Œ**: `--project=chromium`ã‚’æŒ‡å®šã™ã‚‹ã¨ã€æ¯å›`setup`ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹

**è§£æ±ºç­–**: UXæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨åŒã˜ãã€`--headed`ã®ã¿ã‚’æŒ‡å®š

```bash
# âŒ å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³: æ¯å›èªè¨¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹
npx playwright test tests/verify.spec.ts --headed --project=chromium

# âœ… æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³: æ—¢å­˜ã®èªè¨¼ã‚’åˆ©ç”¨
PROJECT_URL="$PROJECT_URL" npx playwright test tests/verify.spec.ts --headed
```

**playwright.config.tsè¨­å®š**:
```typescript
projects: [
  {
    name: 'setup',
    testMatch: /.*\.setup\.ts/,
  },
  {
    name: 'chromium',
    use: { 
      storageState: '.auth/auth.json',
    },
    dependencies: ['setup'], // â˜…æ˜ç¤ºçš„ã«ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©
  },
]
```

### ğŸ“‹ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æˆ¦ç•¥ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### ãƒ†ã‚¹ãƒˆä½œæˆæ™‚
- [ ] å˜ä¸€ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã¯ãªãã€è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥ã‚’ä½¿ç”¨
- [ ] UXæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ`execute_ux_walkthrough.sh`ï¼‰ã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‚ç…§
- [ ] Notionå›ºæœ‰ã®ã‚¯ãƒ©ã‚¹åï¼ˆ`.notion-*`ï¼‰ã‚’èª¿æŸ»ã—ã¦å«ã‚ã‚‹
- [ ] æ­£è¦è¡¨ç¾ã‚’ä½¿ã†å ´åˆã¯`.first()`ã‚’è¿½åŠ 

#### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚
- [ ] `--project`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯æŒ‡å®šã—ãªã„ï¼ˆã¾ãŸã¯æ…é‡ã«ä½¿ç”¨ï¼‰
- [ ] ç’°å¢ƒå¤‰æ•°ï¼ˆ`PROJECT_URL`ç­‰ï¼‰ã‚’æ˜ç¤ºçš„ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- [ ] `--headed`ãƒ¢ãƒ¼ãƒ‰ã§è¦–è¦šçš„ã«ç¢ºèª

#### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- [ ] å¤±æ•—ã—ãŸã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã‚’ãƒ–ãƒ©ã‚¦ã‚¶DevToolsã§æ¤œè¨¼
- [ ] UXæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è©²å½“éƒ¨åˆ†ã‚’å‚ç…§
- [ ] è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®ãƒ«ãƒ¼ãƒ—ã§ã€ã©ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒæˆåŠŸã—ãŸã‹ãƒ­ã‚°å‡ºåŠ›

### ğŸ”§ å®Ÿè£…ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```typescript
// è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æˆ¦ç•¥ã®æ±ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
async function findElementWithFallback(
  page: Page,
  selectors: string[],
  elementName: string
): Promise<Locator | null> {
  for (const selector of selectors) {
    const locator = page.locator(selector).first();
    const count = await locator.count();
    if (count > 0) {
      console.log(`âœ“ ${elementName}ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ (selector: ${selector})`);
      return locator;
    }
  }
  
  console.log(`âš ï¸ ${elementName}ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼ˆå…¨ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼è©¦è¡Œæ¸ˆã¿ï¼‰`);
  return null;
}

// ä½¿ç”¨ä¾‹
const documentLink = await findElementWithFallback(
  page,
  [
    'a:has-text("document")',
    'a[href*="document"]',
    '[role="link"]:has-text("document")',
    'div:has-text("document")'
  ],
  'documentãƒªãƒ³ã‚¯'
);

if (documentLink) {
  await documentLink.click();
} else {
  throw new Error('documentãƒªãƒ³ã‚¯ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
}
```

---

## ğŸ” Playwrightèªè¨¼ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼ˆé‡è¦ï¼‰

### ğŸ“Š storageStateã®ä»•çµ„ã¿ï¼ˆç¢ºèªã•ã‚ŒãŸäº‹å®Ÿï¼‰

#### 1. **ä¿å­˜å…ˆã¨èª­ã¿è¾¼ã¿**
```typescript
// ä¿å­˜ï¼šæŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã«ç›´æ¥ä¿å­˜
await page.context().storageState({ path: 'auth.json' });
// â†’ auth.jsonãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã‚‹

// èª­ã¿è¾¼ã¿ï¼šæ˜ç¤ºçš„ã«æŒ‡å®šãŒå¿…è¦ï¼ˆè‡ªå‹•ã§ã¯èª­ã¿è¾¼ã¾ã‚Œãªã„ï¼‰
// playwright.config.ts
projects: [{
  use: { 
    storageState: 'auth.json' // â˜…æ˜ç¤ºçš„ã«æŒ‡å®šãŒå¿…é ˆ
  }
}]
```

**é‡è¦ãƒã‚¤ãƒ³ãƒˆ:**
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã•ã‚Œã‚‹ï¼ˆPlaywrightã®å†…éƒ¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ã¯ãªã„ï¼‰
- âœ… èª­ã¿è¾¼ã¿ã¯å®Œå…¨ã«æ‰‹å‹•ï¼ˆæ˜ç¤ºçš„ã«æŒ‡å®šã—ãªã„é™ã‚Šçµ¶å¯¾ã«èª­ã¿è¾¼ã¾ã‚Œãªã„ï¼‰
- âŒ è‡ªå‹•ã§èª­ã¿è¾¼ã¾ã‚Œã‚‹ã“ã¨ã¯ä¸€åˆ‡ãªã„

#### 2. **æœ‰åŠ¹æœŸé™**
```json
{
  "cookies": [{
    "name": "file_token",
    "expires": 1792059834.599433 // â† ã“ã®æœŸé™ã¾ã§æœ‰åŠ¹
  }]
}
```

**é‡è¦ãƒã‚¤ãƒ³ãƒˆ:**
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ã¯æ°¸ç¶šçš„ã«å­˜åœ¨
- âœ… å®Ÿéš›ã®æœ‰åŠ¹æœŸé™ã¯å„Cookieã®`expires`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¾å­˜
- âŒ storageStateè‡ªä½“ã«æ™‚é–“åˆ¶é™ã¯ãªã„

#### 3. **ãƒ–ãƒ©ã‚¦ã‚¶å†èµ·å‹•å¾Œã®ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹**
```typescript
// playwright.config.ts
projects: [{
  use: { 
    storageState: authFilePath // â˜…ã“ã“ã§èª­ã¿è¾¼ã‚“ã§ã„ã‚‹
  }
}]
```

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼:**
```
1. npx playwright test
   â†“
2. playwright.config.tsã‚’èª­ã¿è¾¼ã‚€
   â†“
3. storageState: authFilePathã‚’ç™ºè¦‹
   â†“
4. auth.jsonã‚’èª­ã¿è¾¼ã‚€
   â†“
5. ãƒ–ãƒ©ã‚¦ã‚¶èµ·å‹•æ™‚ç‚¹ã§ã€auth.jsonã®Cookies/localStorageã‚’ã‚»ãƒƒãƒˆ
   â†“
6. ãƒ†ã‚¹ãƒˆé–‹å§‹æ™‚ç‚¹ã§ã€ã™ã§ã«ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿
```

**é‡è¦ãƒã‚¤ãƒ³ãƒˆ:**
- âœ… ãƒ–ãƒ©ã‚¦ã‚¶èµ·å‹•æ™‚ã«è¨­å®šã§èª­ã¿è¾¼ã‚“ã§ã„ã‚‹
- âŒ Playwrightã®è‡ªå‹•æ©Ÿèƒ½ã§ã¯ãªã„
- âŒ ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã„ã†æ¦‚å¿µã¯ãªã„ï¼ˆæ¯å›ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã‚€ï¼‰

### ğŸ› ã€Œæ™‚ã€…ã†ã¾ãã„ãã€æ™‚ã€…å¤±æ•—ã™ã‚‹ã€å•é¡Œã®çœŸã®åŸå› 

#### âŒ é–“é•ã£ãŸä»®èª¬
- èª­ã¿è¾¼ã¿è¨­å®šãŒé–“é•ã£ã¦ã„ãŸ
- Playwrightã®ãƒã‚°
- Notionã®ä»•æ§˜å¤‰æ›´

#### âœ… çœŸã®åŸå› ï¼š`auth.json`ã®å†…å®¹ãŒä¸å®Œå…¨ã ã£ãŸ

**å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³:**
```
1. auth.setup.tså®Ÿè¡Œ
2. ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹å¾Œã€3ç§’ã§å³åº§ã«ä¿å­˜
3. auth.jsonä½œæˆï¼ˆ29 cookiesï¼‰ â† ä¸å®Œå…¨ï¼
4. æ¬¡å›ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. ä¸å®Œå…¨ãªauth.jsonã‚’èª­ã¿è¾¼ã‚€
6. â†’ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒå‡ºã‚‹ï¼ˆå¤±æ•—ï¼‰
```

**æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³:**
```
1. auth.jsonå‰Šé™¤
2. auth.setup.tså®Ÿè¡Œ
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•ã§å®Œå…¨ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆ60ç§’å¾…æ©Ÿä¸­ï¼‰
4. auth.jsonä½œæˆï¼ˆ83 cookiesï¼‰ â† å®Œå…¨ï¼
5. æ¬¡å›ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
6. å®Œå…¨ãªauth.jsonã‚’èª­ã¿è¾¼ã‚€
7. â†’ ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒå‡ºãªã„ï¼ˆæˆåŠŸï¼‰
```

### ğŸ¯ æ­£ã—ã„èªè¨¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®å®Ÿè£…

```typescript
import { test as setup } from '@playwright/test';
import path from 'path';
import fs from 'fs';

const authFile = path.join(__dirname, '../../.auth/notion.json');

setup('Notionèªè¨¼', async ({ page }) => {
  setup.setTimeout(180000); // 3åˆ†ã«å»¶é•·
  
  // æ—¢å­˜ã®èªè¨¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ã‚¹ã‚­ãƒƒãƒ—
  if (fs.existsSync(authFile)) {
    console.log('âœ… èªè¨¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™');
    return;
  }
  
  const testPageUrl = process.env.PROJECT_URL || process.env.TEST_PAGE_URL;
  if (!testPageUrl) {
    throw new Error('PROJECT_URL ã¾ãŸã¯ TEST_PAGE_URL ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
  }
  
  await page.goto(testPageUrl, { waitUntil: 'domcontentloaded' });
  await page.waitForTimeout(3000);
  
  // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—æ¤œå‡ºï¼ˆè‡ªå‹•åŒ–è©¦è¡Œï¼‰
  const button = page.locator('button:has-text("Daisukeã¨ã—ã¦ç¶šè¡Œ")');
  const buttonFound = await button.isVisible({ timeout: 3000 }).catch(() => false);
  
  if (buttonFound) {
    await button.click();
    console.log('âœ… è‡ªå‹•ã‚¯ãƒªãƒƒã‚¯æˆåŠŸ');
    await page.waitForTimeout(5000);
  } else {
    // æ‰‹å‹•æ“ä½œã‚’ä¿ƒã™
    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
    console.log('ğŸ‘¤ æ‰‹å‹•æ“ä½œãŒå¿…è¦ã§ã™');
    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
    console.log('');
    console.log('ä»¥ä¸‹ã®æ‰‹é †ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ï¼š');
    console.log('1. Googleã§ãƒ­ã‚°ã‚¤ãƒ³');
    console.log('2. Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é¸æŠ');
    console.log('3. ã€ŒDaisukeã¨ã—ã¦ç¶šè¡Œã€ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼ˆã‚ã‚Œã°ï¼‰');
    console.log('4. Notionãƒšãƒ¼ã‚¸ãŒå®Œå…¨ã«è¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…ã¤');
    console.log('');
    console.log('â³ 2åˆ†é–“å¾…æ©Ÿã—ã¾ã™...');
    console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
    
    // â˜…é‡è¦ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Œå…¨ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹æ™‚é–“ã‚’ç¢ºä¿
    await page.waitForTimeout(120000); // 2åˆ†
  }
  
  // â˜…é‡è¦ï¼šãƒšãƒ¼ã‚¸ãŒå®Œå…¨ã«å®‰å®šåŒ–ã—ã¦ã‹ã‚‰ä¿å­˜
  await page.waitForLoadState('domcontentloaded');
  await page.waitForTimeout(3000); // è¿½åŠ ã®å®‰å®šåŒ–å¾…æ©Ÿ
  
  // storageStateä¿å­˜
  await page.context().storageState({ path: authFile });
  console.log('âœ… èªè¨¼æƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸ');
  
  // â˜…å“è³ªãƒã‚§ãƒƒã‚¯ï¼šãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç¢ºèªï¼ˆæ¨å¥¨ï¼‰
  const stats = fs.statSync(authFile);
  const sizeMB = (stats.size / 1024 / 1024).toFixed(2);
  
  if (stats.size < 1000000) { // 1MBæœªæº€
    console.warn(`âš ï¸ èªè¨¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒå°ã•ã™ãã¾ã™ï¼ˆ${sizeMB}MBï¼‰ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãŒä¸å®Œå…¨ãªå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`);
  } else {
    console.log(`âœ… èªè¨¼çŠ¶æ…‹ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ˆ${sizeMB}MBï¼‰`);
  }
});
```

### ğŸ“‹ èªè¨¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å‰
- [ ] `playwright.config.ts`ã§`storageState`ã‚’æŒ‡å®šã—ã¦ã„ã‚‹
- [ ] `auth.setup.ts`ã¨`playwright.config.ts`ã§åŒã˜ãƒ‘ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
- [ ] ç’°å¢ƒå¤‰æ•°ï¼ˆ`PROJECT_URL`ç­‰ï¼‰ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Œå…¨ã«ãƒ­ã‚°ã‚¤ãƒ³å®Œäº†ã™ã‚‹ã¾ã§å¾…æ©Ÿã—ã¦ã„ã‚‹ï¼ˆ60ç§’ä»¥ä¸Šæ¨å¥¨ï¼‰
- [ ] ãƒšãƒ¼ã‚¸ãŒå®‰å®šåŒ–ã—ã¦ã‹ã‚‰`storageState`ã‚’ä¿å­˜ã—ã¦ã„ã‚‹
- [ ] ä¿å­˜å¾Œã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’ç¢ºèªã—ã¦ã„ã‚‹ï¼ˆ1MBä»¥ä¸Šæ¨å¥¨ï¼‰

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¾Œ
- [ ] `auth.json`ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ1MBä»¥ä¸Šã‚ã‚‹
- [ ] æ¬¡å›ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒå‡ºãªã„

### ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### å•é¡Œ: ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒæ¯å›å‡ºã‚‹
**åŸå› :** `auth.json`ã®å†…å®¹ãŒä¸å®Œå…¨
**å¯¾å‡¦:**
```bash
# 1. auth.jsonã‚’å‰Šé™¤
rm -f .auth/notion.json

# 2. å†åº¦èªè¨¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ‰‹å‹•ãƒ­ã‚°ã‚¤ãƒ³æ™‚é–“ã‚’ååˆ†ã«å–ã‚‹ï¼‰
npx playwright test tests/auth.setup.ts --headed

# 3. ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç¢ºèª
ls -lh .auth/notion.json
# â†’ 1.5MBä»¥ä¸Šã‚ã‚‹ã¹ã
```

#### å•é¡Œ: èªè¨¼ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„
**åŸå› :** `playwright.config.ts`ã§`storageState`ã‚’æŒ‡å®šã—ã¦ã„ãªã„
**å¯¾å‡¦:**
```typescript
// playwright.config.ts
projects: [{
  name: 'chromium',
  use: { 
    storageState: '.auth/notion.json' // â˜…æ˜ç¤ºçš„ã«æŒ‡å®š
  },
}]
```

#### å•é¡Œ: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ã„ï¼ˆ1MBæœªæº€ï¼‰
**åŸå› :** ãƒ­ã‚°ã‚¤ãƒ³å®Œäº†å‰ã«ä¿å­˜ã—ã¦ã„ã‚‹
**å¯¾å‡¦:**
```typescript
// auth.setup.ts
// æ‰‹å‹•æ“ä½œã®å¾…æ©Ÿæ™‚é–“ã‚’å»¶é•·
await page.waitForTimeout(120000); // 60ç§’ â†’ 120ç§’

// ãƒšãƒ¼ã‚¸å®‰å®šåŒ–ã®å¾…æ©Ÿã‚’è¿½åŠ 
await page.waitForLoadState('domcontentloaded');
await page.waitForTimeout(5000); // 3ç§’ â†’ 5ç§’
```

### ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ï¼‰

è©³ç´°ã¯ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ï¼š
- `STORAGESTATE_MECHANISM.md` - storageStateã®ä»•çµ„ã¿å®Œå…¨è§£èª¬
- `STORAGESTATE_DEEP_ANALYSIS.md` - å®Ÿé¨“çµæœã¨åˆ†æ
- `ROOT_CAUSE_ANALYSIS.md` - ã€Œæ™‚ã€…å¤±æ•—ã™ã‚‹ã€å•é¡Œã®æ ¹æœ¬åŸå› 
- `AUTHENTICATION_SUCCESS_ANALYSIS.md` - èªè¨¼æˆåŠŸã®åˆ†æ

---

---

## å‰æ
- åŸºæœ¬çš„ãªæ©Ÿèƒ½å®Ÿè£…ãŒå®Œäº†æ¸ˆã¿
- ãƒ†ã‚¹ãƒˆå¯¾è±¡ãŒCLIãƒ„ãƒ¼ãƒ«ã¾ãŸã¯Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆå½¢å¼**: CLIã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã¨Playwrightæ¤œè¨¼ã‚’çµ„ã¿åˆã‚ã›ã‚‹

## ç›®çš„
- å®Ÿéš›ã«å‹•ä½œã™ã‚‹ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
- Playwrightã‚³ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ
- å†ç¾å¯èƒ½ã§ä¿å®ˆæ€§ã®é«˜ã„ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’æ§‹ç¯‰

---

## å®Ÿè¡Œæ‰‹é †

### Phase 0: ãƒ†ã‚¹ãƒˆè¦ä»¶åˆ†æã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç†è§£

```yaml
- name: "analyze_project_structure"
      action: "execute_shell"
      command: |
    echo "ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’åˆ†æä¸­..."
    find . -type f -name "*.md" -path "*/documents/*" | head -20
    find . -type f -name "*.py" -o -name "*.js" -o -name "*.ts" | head -20
```

**AIæŒ‡ç¤º**: 
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®READMEã€ä»•æ§˜æ›¸ã€ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª
- ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®æ©Ÿèƒ½ã‚’ç‰¹å®šï¼ˆCLI/Web/APIï¼‰
- ä¸»è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼4ã¤ã‚’æŠ½å‡º
- èªè¨¼ã®æœ‰ç„¡ã‚’ç¢ºèª

---

### Phase 1: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

```yaml
- name: "design_hybrid_test_scenarios"
      action: "create_markdown_file"
  path: "{{test_dir}}/TEST_DESIGN.md"
      content: |
    # ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆè¨­è¨ˆ
    
    ## ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
    **åç§°**: {{project_name}}
    **ã‚¿ã‚¤ãƒ—**: {{project_type}}  # CLI / Web / API
    
    ## ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª
    
    ### Scenario 1: åŸºæœ¬ãƒ•ãƒ­ãƒ¼ï¼ˆãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ï¼‰
    **Phaseæ§‹æˆ**:
    1. Phase 1 (Cursor): åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆCLIã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œï¼‰
    2. Phase 2 (Playwright): åˆæœŸçŠ¶æ…‹ã®æ¤œè¨¼
    3. Phase 3 (Cursor): ä¸»è¦æ©Ÿèƒ½ã®å®Ÿè¡Œ
    4. Phase 4 (Playwright): çµæœã®æ¤œè¨¼
    
    **æˆåŠŸåŸºæº–**:
    - å…¨PhaseãŒæ­£å¸¸å®Œäº†
    - Playwrightæ¤œè¨¼ãŒ100%ãƒ‘ã‚¹
    
    ### Scenario 2: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆç«¶åˆè§£æ±ºãªã©ï¼‰
    **Phaseæ§‹æˆ**:
    1. Phase 1 (Cursor): åˆæœŸãƒ‡ãƒ¼ã‚¿ä½œæˆ
    2. Phase 2 (Playwright): åˆæœŸåŒæœŸç¢ºèª
    3. Phase 3 (Cursor/Manual): ãƒ‡ãƒ¼ã‚¿ç·¨é›†ï¼ˆä¸¡å´ï¼‰
    4. Phase 4 (Cursor): Pullå®Ÿè¡Œï¼ˆç«¶åˆæ¤œå‡ºï¼‰
    5. Phase 5 (Manual): ç«¶åˆè§£æ±º
    6. Phase 6 (Cursor): Pushå®Ÿè¡Œ
    7. Phase 7 (Playwright): æœ€çµ‚çŠ¶æ…‹ç¢ºèª
    
    **é‡è¦**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ãªã©ã€ç’°å¢ƒä¾å­˜ã®å•é¡Œã«å¯¾å‡¦
    
    ### Scenario 3: å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†
    **Phaseæ§‹æˆ**:
    1. Phase 1 (Cursor): ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆï¼ˆ100ä»¶ãªã©ï¼‰
    2. Phase 2 (Cursor): ãƒãƒƒãƒå‡¦ç†å®Ÿè¡Œ
    3. Phase 3 (Playwright): çµæœç¢ºèªï¼ˆä¸€éƒ¨ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ï¼‰
    
    ### Scenario 4: ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹
    **Phaseæ§‹æˆ**:
    1. Phase 1 (Cursor): ç‰¹æ®Šæ¡ä»¶ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    2. Phase 2 (Cursor): å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    3. Phase 3 (Playwright): ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºç¢ºèª
```

---

### Phase 2: Playwrightã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆå®Ÿç”¨çš„ãªè¨­å®šï¼‰

```yaml
- name: "generate_working_playwright_config"
  action: "create_file"
  path: "{{test_dir}}/playwright.config.ts"
      content: |
        import { defineConfig, devices } from '@playwright/test';
        
        export default defineConfig({
          testDir: './tests',
      fullyParallel: false,  // ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«å®Ÿè¡Œï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆã®ãŸã‚ï¼‰
      workers: 1,
      retries: 0,  // ãƒªãƒˆãƒ©ã‚¤ãªã—ï¼ˆãƒ‡ãƒãƒƒã‚°ã—ã‚„ã™ãã™ã‚‹ãŸã‚ï¼‰
          
      timeout: 300000,  // 5åˆ†ï¼ˆæ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—ã‚’å«ã‚€ãŸã‚ï¼‰
          
          reporter: [
        ['html', { open: 'never' }],  // è‡ªå‹•ã‚ªãƒ¼ãƒ—ãƒ³ç„¡åŠ¹ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«å¾©å¸°ã®ãŸã‚ï¼‰
            ['list']
          ],
          
          use: {
        actionTimeout: 60000,  // 1åˆ†
        navigationTimeout: 60000,
            
            trace: 'on-first-retry',
            screenshot: 'only-on-failure',
            video: 'retain-on-failure',
          },
          
          projects: [
            {
              name: 'setup',
              testMatch: /.*\.setup\.ts/,
            },
            {
              name: 'chromium',
              use: { 
                ...devices['Desktop Chrome'],
            storageState: '.auth/auth.json',
              },
              dependencies: ['setup'],
        },
      ],
    });
```

---

### Phase 3: èªè¨¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆå®Ÿéš›ã«å‹•ãã‚³ãƒ¼ãƒ‰ï¼‰

```yaml
- name: "generate_working_auth_setup"
  action: "create_file"
  path: "{{test_dir}}/tests/auth.setup.ts"
      content: |
    import { test as setup } from '@playwright/test';
        import path from 'path';
        
    const authFile = path.join(__dirname, '../.auth/auth.json');
        
        setup('authenticate', async ({ page }) => {
          console.log('ğŸ” èªè¨¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—é–‹å§‹...');
          
      // çµ±ä¸€URLè§£æ±ºã‚·ã‚¹ãƒ†ãƒ : è¤‡æ•°ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
      const testPageUrl = process.env.TEST_PAGE_URL || 
                         process.env.ROOT_PAGE_URL || 
                         process.env.README_PAGE_URL;
      if (!testPageUrl) {
        throw new Error('TEST_PAGE_URL, ROOT_PAGE_URL, or README_PAGE_URL ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
      }
      
      // ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹
      await page.goto(testPageUrl, { waitUntil: 'domcontentloaded' });
      await page.waitForTimeout(3000);
      
      console.log('ğŸ“„ ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
      
      // Google SSOã€ŒDaisukeã¨ã—ã¦å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã®å‡¦ç†ï¼ˆå®Ÿè¨¼æ¸ˆã¿ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
      try {
        // è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ã§ç¢ºå®Ÿã«ãƒœã‚¿ãƒ³ã‚’æ¤œå‡º
        const runAsButton = page.getByText(/Daisukeã¨ã—ã¦å®Ÿè¡Œ|ã¨ã—ã¦å®Ÿè¡Œ|Continue as Daisuke/i)
                               .or(page.locator('[data-testid*=\"run-as\"]'))
                               .or(page.locator('button:has-text(\"Daisuke\")'));
        
        const isVisible = await runAsButton.isVisible({ timeout: 10000 });
        if (isVisible) {
          await runAsButton.click();
          console.log('âœ“ ã€ŒDaisukeã¨ã—ã¦å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã—ãŸ');
          await page.waitForTimeout(3000);
        }
      } catch (e) {
        console.log('â„¹ï¸ ã€ŒDaisukeã¨ã—ã¦å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ');
      }
          
          // èªè¨¼çŠ¶æ…‹ã‚’ä¿å­˜
          await page.context().storageState({ path: authFile });
      console.log('âœ… èªè¨¼çŠ¶æ…‹ã‚’ä¿å­˜ã—ã¾ã—ãŸ');
    });
```

---

### Phase 4: ã‚·ãƒŠãƒªã‚ª1å®Ÿè£…ï¼ˆå®Ÿè¨¼æ¸ˆã¿ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

```yaml
    - name: "generate_scenario1_spec"
  action: "create_file"
  path: "{{test_dir}}/tests/scenario1-basic-flow.spec.ts"
      content: |
        import { test, expect } from '@playwright/test';
    
    /**
     * Scenario 1: åŸºæœ¬ãƒ•ãƒ­ãƒ¼ï¼ˆãƒãƒƒãƒ”ãƒ¼ãƒ‘ã‚¹ï¼‰
     * 
     * ã“ã®ãƒ†ã‚¹ãƒˆã¯ Playwright ã®ã¿ã§å®Œçµã—ã¾ã™ã€‚
     * CLIã‚³ãƒãƒ³ãƒ‰ã¯äº‹å‰ã«æ‰‹å‹•ã¾ãŸã¯ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè¡Œæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¾ã™ã€‚
     */
    
    test.describe('Scenario 1: åŸºæœ¬ãƒ•ãƒ­ãƒ¼æ¤œè¨¼', () => {
      test('README.md ãŒæ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹', async ({ page }) => {
        // çµ±ä¸€URLè§£æ±ºã‚·ã‚¹ãƒ†ãƒ : è¤‡æ•°ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        const readmeUrl = process.env.README_PAGE_URL || 
                         process.env.TEST_PAGE_URL || 
                         process.env.ROOT_PAGE_URL;
        if (!readmeUrl) {
          throw new Error('README_PAGE_URL, TEST_PAGE_URL, or ROOT_PAGE_URL ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
        }
        
        console.log(`ğŸ“„ ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã„ã¾ã™: ${readmeUrl}`);
        await page.goto(readmeUrl, { waitUntil: 'domcontentloaded' });
        await page.waitForTimeout(2000);
        
        // ã‚¿ã‚¤ãƒˆãƒ«ç¢ºèª
        console.log('ğŸ“ ã‚¿ã‚¤ãƒˆãƒ«ã‚’ç¢ºèªä¸­...');
        const title = page.getByRole('heading', { level: 1 });
        await expect(title).toBeVisible();
        console.log('âœ“ H1è¦‹å‡ºã—ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™');
        
        // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç¢ºèª
        console.log('ğŸ“ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªä¸­...');
        const sections = page.getByRole('heading', { level: 2 });
        const count = await sections.count();
        expect(count).toBeGreaterThan(0);
        console.log(`âœ“ ${count}å€‹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
        
        console.log('âœ… Scenario 1å®Œäº†: åŸºæœ¬ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™');
      });
      
      test('ãƒªã‚¹ãƒˆè¦ç´ ãŒæ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹', async ({ page }) => {
        // çµ±ä¸€URLè§£æ±ºã‚·ã‚¹ãƒ†ãƒ : è¤‡æ•°ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        const readmeUrl = process.env.README_PAGE_URL || 
                         process.env.TEST_PAGE_URL || 
                         process.env.ROOT_PAGE_URL;
        await page.goto(readmeUrl, { waitUntil: 'domcontentloaded' });
        await page.waitForTimeout(2000);
        
        // ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®å­˜åœ¨ç¢ºèª
        const listItems = page.getByRole('listitem');
        const count = await listItems.count();
        expect(count).toBeGreaterThan(0);
        console.log(`âœ“ ${count}å€‹ã®ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
          });
        });
```

---

### Phase 5: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ

```yaml
- name: "generate_hybrid_test_script"
  action: "create_file"
  path: "{{test_dir}}/run_scenario2_hybrid.sh"
      content: |
    #!/usr/bin/env bash
    set -e
    
    # ã‚«ãƒ©ãƒ¼å®šç¾©
    RED='\033[0;31m'
    GREEN='\033[0;32m'
    BLUE='\033[0;34m'
    YELLOW='\033[1;33m'
    NC='\033[0m'
    
    echo -e "${BLUE}ğŸš€ Scenario 2 Hybrid Testé–‹å§‹...${NC}"
    
    # ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿
    if [ -f ".env" ]; then
        export $(grep -v '^#' .env | xargs)
        echo "âœ… .envãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å®Œäº†"
    else
        echo -e "${RED}âŒ .envãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“${NC}"
        exit 1
    fi
    
    # ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
    TEST_DIR="test_scenario2_$(date +%Y%m%d_%H%M%S)"
    mkdir -p "$TEST_DIR"
    cd "$TEST_DIR"
    
    echo -e "${GREEN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${GREEN}Phase 1: åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆCursorï¼‰${NC}"
    echo -e "${GREEN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    
    # ä»®æƒ³ç’°å¢ƒæœ‰åŠ¹åŒ–
    if [ -d "../venv_test" ]; then
        source ../venv_test/bin/activate
    fi
    
    # CLIã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œä¾‹
    echo "ğŸ“¦ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ä¸­..."
    # your_cli_command init .
    
    echo -e "${GREEN}âœ… Phase 1å®Œäº†${NC}"
    echo ""
    
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ï¼ˆé‡è¦ï¼ï¼‰
    echo "ğŸ—‘ï¸ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ä¸­..."
    rm -rf .cache
    
    echo -e "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${BLUE}Phase 2: åˆæœŸçŠ¶æ…‹æ¤œè¨¼ï¼ˆPlaywrightï¼‰${NC}"
    echo -e "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    
    cd ..
    # çµ±ä¸€URLè§£æ±ºã‚·ã‚¹ãƒ†ãƒ : config.jsonã‹ã‚‰å–å¾—
    CONFIG_FILE="$TEST_DIR/.c2n/config.json"
    if [ -f "$CONFIG_FILE" ]; then
        TEST_PAGE_URL=$(python3 -c "
import json
try:
    with open('$CONFIG_FILE', 'r') as f:
        data = json.load(f)
        print(data.get('default_parent_url', ''))
except:
    pass
")
        echo "ğŸ“‹ çµ±ä¸€URLã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å–å¾—: $TEST_PAGE_URL"
    else
        TEST_PAGE_URL="$NOTION_ROOT_URL"
        echo "âš ï¸ ç’°å¢ƒå¤‰æ•°ã‹ã‚‰URLå–å¾—: $TEST_PAGE_URL"
    fi
    
    export TEST_PAGE_URL
    npx playwright test tests/scenario2-phase2-verify.spec.ts --project=chromium
    
    if [ $? -ne 0 ]; then
        echo -e "${RED}âŒ Phase 2å¤±æ•—${NC}"
        exit 1
    fi
    
    echo -e "${GREEN}âœ… Phase 2å®Œäº†${NC}"
    echo ""
    
    echo -e "${GREEN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
    echo -e "${GREEN}âœ… Scenario 2 Hybrid Testå®Œäº†${NC}"
    echo -e "${GREEN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
```

---

### Phase 6: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ

```yaml
- name: "generate_validation_script"
  action: "create_file"
  path: "{{test_dir}}/scripts/validate_playwright_tests.sh"
      content: |
    #!/usr/bin/env bash
    set -e
    
    echo "ğŸ” Playwrightãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­..."
    
    # TypeScriptã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚§ãƒƒã‚¯
    echo "ğŸ“ TypeScriptã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚§ãƒƒã‚¯..."
    npx tsc --noEmit --project tsconfig.json
    
    if [ $? -ne 0 ]; then
        echo "âŒ TypeScriptã‚¨ãƒ©ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ"
        exit 1
    fi
    
    echo "âœ… TypeScriptã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹OK"
    
    # Playwrightè¨­å®šãƒã‚§ãƒƒã‚¯
    echo "ğŸ“ Playwrightè¨­å®šãƒã‚§ãƒƒã‚¯..."
    if [ ! -f "playwright.config.ts" ]; then
        echo "âŒ playwright.config.ts ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        exit 1
    fi
    
    # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯
    echo "ğŸ“ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯..."
    test_files=$(find tests -name "*.spec.ts" | wc -l)
    if [ $test_files -eq 0 ]; then
        echo "âŒ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        exit 1
    fi
    
    echo "âœ… ${test_files}å€‹ã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç™ºè¦‹"
    
    # ã‚»ãƒ¬ã‚¯ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯
    echo "ğŸ“ æ¨å¥¨ã‚»ãƒ¬ã‚¯ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒã‚§ãƒƒã‚¯..."
    bad_selectors=$(grep -r "page\.locator('[^']*#[^']*')" tests/ | wc -l)
    if [ $bad_selectors -gt 0 ]; then
        echo "âš ï¸ ID ã‚»ãƒ¬ã‚¯ã‚¿ã®ä½¿ç”¨ãŒ ${bad_selectors}ç®‡æ‰€è¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼ˆæ¨å¥¨: getByRoleï¼‰"
    fi
    
    good_selectors=$(grep -r "getByRole\|getByText\|getByLabel" tests/ | wc -l)
    echo "âœ… æ¨å¥¨ã‚»ãƒ¬ã‚¯ã‚¿ã®ä½¿ç”¨: ${good_selectors}ç®‡æ‰€"
    
    # ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸå¾…æ©Ÿæ™‚é–“ãƒã‚§ãƒƒã‚¯
    echo "ğŸ“ ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸå¾…æ©Ÿæ™‚é–“ãƒã‚§ãƒƒã‚¯..."
    hard_waits=$(grep -r "waitForTimeout" tests/ | wc -l)
    if [ $hard_waits -gt 5 ]; then
        echo "âš ï¸ waitForTimeout ã®ä½¿ç”¨ãŒ ${hard_waits}ç®‡æ‰€ï¼ˆæ¨å¥¨: waitForSelectorä½¿ç”¨ï¼‰"
    fi
    
    echo ""
    echo "âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "ğŸ“Š ã‚µãƒãƒªãƒ¼:"
    echo "  - ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«: ${test_files}å€‹"
    echo "  - æ¨å¥¨ã‚»ãƒ¬ã‚¯ã‚¿ä½¿ç”¨: ${good_selectors}ç®‡æ‰€"
    echo "  - æ”¹å–„æ¨å¥¨ç®‡æ‰€: $((bad_selectors + (hard_waits > 5 ? 1 : 0)))ç®‡æ‰€"
```

```yaml
- name: "generate_tsconfig"
  action: "create_file"
  path: "{{test_dir}}/tsconfig.json"
  content: |
    {
      "compilerOptions": {
        "target": "ES2020",
        "module": "commonjs",
        "lib": ["ES2020"],
        "strict": true,
        "esModuleInterop": true,
        "skipLibCheck": true,
        "forceConsistentCasingInFileNames": true,
        "resolveJsonModule": true,
        "types": ["node", "@playwright/test"]
      },
      "include": ["tests/**/*", "playwright.config.ts"],
      "exclude": ["node_modules"]
    }
```

---

### Phase 7: æ‰‹å‹•æ¤œè¨¼ã‚¬ã‚¤ãƒ‰ç”Ÿæˆ

```yaml
- name: "generate_manual_verification_guide"
  action: "create_file"
  path: "{{test_dir}}/MANUAL_VERIFICATION_GUIDE.md"
      content: |
    # æ‰‹å‹•æ¤œè¨¼ã‚¬ã‚¤ãƒ‰
    
    ## ğŸ“‹ æ¦‚è¦
    å®Œå…¨è‡ªå‹•åŒ–ãŒé›£ã—ã„éƒ¨åˆ†ã«ã¤ã„ã¦ã€æ‰‹å‹•æ¤œè¨¼ã®æ‰‹é †ã‚’è¨˜è¼‰ã—ã¦ã„ã¾ã™ã€‚
    
    ## ğŸ¯ æ‰‹å‹•æ¤œè¨¼ãŒå¿…è¦ãªç†ç”±
    - Notion UIã®è¤‡é›‘ãªæ§‹é€ ã«ã‚ˆã‚Šã€ã‚»ãƒ¬ã‚¯ã‚¿ãŒä¸å®‰å®š
    - èªè¨¼ãƒ•ãƒ­ãƒ¼ã«å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆGoogle SSOï¼‰ãŒçµ¡ã‚€
    - ãƒ‡ãƒ¼ã‚¿ã®`last_edited_time`æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒä¸ç¢ºå®š
    
    ## ğŸ“ æ‰‹å‹•æ¤œè¨¼æ‰‹é †
    
    ### Scenario 2: Pull & Conflict Resolution
    
    #### Phase 1-2: è‡ªå‹•å®Ÿè¡Œï¼ˆCursor + Playwrightï¼‰
    ```bash
    ./run_scenario2_hybrid.sh
    ```
    
    #### Phase 3: æ‰‹å‹•ç·¨é›†ï¼ˆ5åˆ†å¾…æ©Ÿï¼‰
    
    **é‡è¦**: Notion UI ã§ç·¨é›†å¾Œã€**å¿…ãš5åˆ†å¾…æ©Ÿ**ã—ã¦ãã ã•ã„ã€‚
    ã“ã‚Œã¯Notionã®`last_edited_time`ãŒå†…éƒ¨çš„ã«æ›´æ–°ã•ã‚Œã‚‹ã¾ã§ã®æ™‚é–“ã§ã™ã€‚
    
    1. ãƒ–ãƒ©ã‚¦ã‚¶ã§Notionãƒšãƒ¼ã‚¸ã‚’é–‹ã
    2. ä»¥ä¸‹ã‚’ç·¨é›†:
       - Section A: æœ€å¾Œã« "Edited via Notion UI." ã‚’è¿½åŠ 
       - Section B: å†…å®¹ã‚’å®Œå…¨ã«æ›¸ãæ›ãˆ
       - æ–°ã—ã„ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ 
    3. **ã‚¿ã‚¤ãƒãƒ¼ã‚’5åˆ†ã«ã‚»ãƒƒãƒˆ** â°
    4. å¾…æ©Ÿä¸­ã«ä»–ã®ä½œæ¥­ã‚’ã™ã‚‹ï¼ˆã‚³ãƒ¼ãƒ’ãƒ¼ãƒ–ãƒ¬ã‚¤ã‚¯æ¨å¥¨ â˜•ï¼‰
    
    #### Phase 4-7: è‡ªå‹•å®Ÿè¡Œï¼ˆCursorï¼‰
    ```bash
    # Phase 3ã®5åˆ†å¾…æ©Ÿå¾Œã«å®Ÿè¡Œ
    ./run_scenario2_hybrid_continue.sh
    ```
    
    ### æˆåŠŸåŸºæº–
    - [ ] Phase 5 ã§ "Found X pages changed" ã¨è¡¨ç¤ºã•ã‚Œã‚‹
    - [ ] ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆãƒãƒ¼ã‚«ãƒ¼ï¼ˆ`<<<<<<< LOCAL`ï¼‰ãŒç”Ÿæˆã•ã‚Œã‚‹
    - [ ] Phase 7 ã§æœ€çµ‚çŠ¶æ…‹ãŒæ­£ã—ãåæ˜ ã•ã‚Œã‚‹
    
    ### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    
    #### "No changes found" ã¨è¡¨ç¤ºã•ã‚Œã‚‹
    **åŸå› **: `last_edited_time`ãŒæ›´æ–°ã•ã‚Œã¦ã„ãªã„
    **å¯¾å‡¦**: ã•ã‚‰ã«5åˆ†å¾…ã£ã¦ã‹ã‚‰ Phase 4 ã‚’å†å®Ÿè¡Œ
    
    #### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã„ã‚‹
    **åŸå› **: å‰å›ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã„ã‚‹
    **å¯¾å‡¦**:
    ```bash
    rm -rf .cache .c2n/cache
    ```
    
    ## ğŸ“Š æ¤œè¨¼çµæœã®è¨˜éŒ²
    
    æ¤œè¨¼å®Œäº†å¾Œã€ä»¥ä¸‹ã‚’è¨˜éŒ²ã—ã¦ãã ã•ã„ï¼š
    
    - [ ] æ¤œè¨¼æ—¥æ™‚: _______________
    - [ ] æ¤œè¨¼è€…: _______________
    - [ ] å…¨PhaseãŒæˆåŠŸã—ãŸã‹: [ ] ã¯ã„ [ ] ã„ã„ãˆ
    - [ ] æ‰€è¦æ™‚é–“: ç´„ _______ åˆ†
    - [ ] ç™ºè¦‹ã—ãŸå•é¡Œç‚¹:
      ```
      
      
      ```
```

---

### Phase 8: package.jsonã¨READMEç”Ÿæˆ

```yaml
- name: "generate_package_json"
  action: "create_file"
  path: "{{test_dir}}/package.json"
      content: |
        {
      "name": "{{project_name}}-integration-tests",
      "version": "1.0.0",
      "description": "ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆ - {{project_name}}",
      "scripts": {
        "test": "playwright test",
        "test:ui": "playwright test --ui",
        "test:headed": "playwright test --headed",
        "test:debug": "playwright test --debug",
        "test:scenario1": "playwright test tests/scenario1*.spec.ts",
        "validate": "bash scripts/validate_playwright_tests.sh",
        "hybrid:scenario2": "bash run_scenario2_hybrid.sh"
      },
      "keywords": ["playwright", "e2e", "hybrid-test"],
      "devDependencies": {
        "@playwright/test": "^1.40.0",
        "@types/node": "^20.0.0",
        "typescript": "^5.0.0"
      }
    }

- name: "generate_main_readme"
  action: "create_file"
  path: "{{test_dir}}/README_INTEGRATION_TEST.md"
      content: |
    # çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¬ã‚¤ãƒ‰
    
    ## ğŸ¯ ã“ã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã«ã¤ã„ã¦
    
    ã“ã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã¯ã€**ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å½¢å¼**ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ï¼š
    - **Cursorã‚³ãƒãƒ³ãƒ‰**: CLIãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œã€ãƒ‡ãƒ¼ã‚¿æ“ä½œ
    - **Playwright**: UIæ¤œè¨¼ã€è¡¨ç¤ºç¢ºèª
    - **æ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—**: å®Œå…¨è‡ªå‹•åŒ–ãŒå›°é›£ãªéƒ¨åˆ†
        
        ## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        
    ### 1. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        ```bash
        npm install
    npx playwright install chromium
        ```
        
    ### 2. ç’°å¢ƒå¤‰æ•°è¨­å®š
        ```bash
    cp .env.example .env
    # .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦å¿…è¦ãªå€¤ã‚’è¨­å®š
    ```
    
    ### 3. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
        ```bash
    npm run validate
        ```
        
    ## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
    
    ### Scenario 1: åŸºæœ¬ãƒ•ãƒ­ãƒ¼ï¼ˆå®Œå…¨è‡ªå‹•ï¼‰
        ```bash
    npm run test:scenario1
        ```
        
    ### Scenario 2: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰
        ```bash
    npm run hybrid:scenario2
        ```
    **æ³¨æ„**: æ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—ãŒå«ã¾ã‚Œã¾ã™ã€‚ç”»é¢ã®æŒ‡ç¤ºã«å¾“ã£ã¦ãã ã•ã„ã€‚
        
    ### å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        ```bash
    npm test
        ```
        
    ## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã®ç¢ºèª
    
        ```bash
    npx playwright show-report
    ```
    
    ## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
    
    ### ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹
    1. `playwright-report/` ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç¢ºèª
    2. `npm run validate` ã§ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
    3. `.env` ã®è¨­å®šã‚’ç¢ºèª
    
    ### èªè¨¼ã‚¨ãƒ©ãƒ¼
        ```bash
    rm -rf .auth
    npx playwright test tests/auth.setup.ts
    ```
    
    ## ğŸ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
    
    1. **ã‚»ãƒ¬ã‚¯ã‚¿**: `getByRole`, `getByText` ã‚’å„ªå…ˆ
    2. **å¾…æ©Ÿ**: `waitForSelector` ã‚’ä½¿ç”¨ï¼ˆ`waitForTimeout`ã¯æœ€å°é™ã«ï¼‰
    3. **ç’°å¢ƒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: ãƒ†ã‚¹ãƒˆå‰ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
    4. **æ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—**: `MANUAL_VERIFICATION_GUIDE.md` ã‚’å‚ç…§
    
    ## ğŸ”— å‚è€ƒè³‡æ–™
    
    - `MANUAL_VERIFICATION_GUIDE.md` - æ‰‹å‹•æ¤œè¨¼æ‰‹é †
    - `TEST_DESIGN.md` - ãƒ†ã‚¹ãƒˆè¨­è¨ˆæ›¸
    - `scripts/validate_playwright_tests.sh` - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

---

### Phase 9: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

```yaml
- name: "copy_validation_scripts"
  action: "execute_shell"
  command: |
    cp scripts/validate_playwright_tests.sh {{test_dir}}/scripts/
    cp scripts/validate_playwright_tests.py {{test_dir}}/scripts/
    chmod +x {{test_dir}}/scripts/validate_playwright_tests.sh
  message: "ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ"

- name: "run_validation"
  action: "execute_shell"
  command: |
    cd {{test_dir}}
    bash scripts/validate_playwright_tests.sh . | tee validation_results.log
  message: "Playwrightãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­..."

- name: "display_validation_results"
  action: "display"
  content: |
    ğŸ“Š ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœ:
    
    è©³ç´°ã¯ {{test_dir}}/validation_results.log ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
    
    ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³åˆæ ¼ã®å ´åˆã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚ã¾ã™ã€‚
    è­¦å‘ŠãŒã‚ã‚‹å ´åˆã¯ã€å“è³ªå‘ä¸Šã®ãŸã‚ä¿®æ­£ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

### Phase 10: ã‚µãƒãƒªãƒ¼ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ

```yaml
- name: "create_summary_report"
  action: "create_file"
  path: "{{test_dir}}/TEST_SUITE_SUMMARY.md"
  content: |
    # çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆä½œæˆå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ
    
    ## ğŸ“¦ ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«
    
    ### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
    - `package.json` - npmè¨­å®š
    - `playwright.config.ts` - Playwrightè¨­å®šï¼ˆå®Ÿç”¨çš„ãªè¨­å®šï¼‰
    - `tsconfig.json` - TypeScriptè¨­å®š
    - `.env.example` - ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    
    ### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
    - `tests/auth.setup.ts` - èªè¨¼ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆGoogle SSOå¯¾å¿œï¼‰
    - `tests/scenario1-basic-flow.spec.ts` - åŸºæœ¬ãƒ•ãƒ­ãƒ¼æ¤œè¨¼
    
    ### ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    - `run_scenario2_hybrid.sh` - Scenario 2 å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    
    ### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    - `scripts/validate_playwright_tests.sh` - ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
    
    ### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    - `README_INTEGRATION_TEST.md` - å®Ÿè¡Œã‚¬ã‚¤ãƒ‰
    - `MANUAL_VERIFICATION_GUIDE.md` - æ‰‹å‹•æ¤œè¨¼æ‰‹é †
    - `TEST_DESIGN.md` - ãƒ†ã‚¹ãƒˆè¨­è¨ˆæ›¸
    
    ## âœ… å®Ÿè¨¼æ¸ˆã¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¡ç”¨
    
    ### èªè¨¼å‡¦ç†
    - Google SSOã®ã€ŒContinue as [User]ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å¯¾å¿œ
    - `domcontentloaded` + `waitForTimeout` ã®çµ„ã¿åˆã‚ã›
    
    ### ã‚»ãƒ¬ã‚¯ã‚¿æˆ¦ç•¥
    - `page.getByRole('heading', { level: 1 })` - æ„å‘³çš„ãªã‚»ãƒ¬ã‚¯ã‚¿
    - `page.getByText(/ãƒ‘ã‚¿ãƒ¼ãƒ³/i)` - ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹æ¤œç´¢
    - iframeå›é¿ - ç›´æ¥DOMè¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹
    
    ### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
    - ãƒ†ã‚¹ãƒˆå‰ã®æ˜ç¤ºçš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
    - `nit pull` ã®å·®åˆ†æ¤œå‡ºå•é¡Œã«å¯¾å¿œ
    
    ### æ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—ã®çµ„ã¿è¾¼ã¿
    - 5åˆ†å¾…æ©Ÿãªã©ã€è‡ªå‹•åŒ–å›°é›£ãªéƒ¨åˆ†ã‚’æ˜ç¤º
    - æ‰‹å‹•æ¤œè¨¼ã‚¬ã‚¤ãƒ‰ã§è©³ç´°ãªæ‰‹é †ã‚’æä¾›
    
    ## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
    
    1. **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ**:
           ```bash
       cd {{test_dir}}
       npm install
       npm run validate
           ```
        
    2. **Scenario 1 å®Ÿè¡Œ**:
        ```bash
       npm run test:scenario1
       ```
    
    3. **Scenario 2 å®Ÿè¡Œ**ï¼ˆæ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—ã‚ã‚Šï¼‰:
       ```bash
       npm run hybrid:scenario2
       ```
    
    4. **çµæœç¢ºèª**:
       ```bash
       npx playwright show-report
       ```
    
    ## ğŸ“Š å“è³ªæŒ‡æ¨™ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœï¼‰
    
    ### è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œæ¸ˆã¿
    - **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: {{validation_status}}
    - **å“è³ªãƒ¬ãƒ™ãƒ«**: {{validation_quality_level}}
    - **ç·ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ•°**: {{validation_test_files}}å€‹
    - **ç·ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³æ•°**: {{validation_assertions}}å€‹
    - **æ¨å¥¨ã‚»ãƒ¬ã‚¯ã‚¿ä½¿ç”¨**: {{validation_good_selectors}}ç®‡æ‰€
    - **è­¦å‘Š**: {{validation_warnings}}ä»¶
    - **ã‚¨ãƒ©ãƒ¼**: {{validation_errors}}ä»¶
    
    ### å“è³ªãƒã‚§ãƒƒã‚¯é …ç›®
    - âœ… TypeScriptå‹ãƒã‚§ãƒƒã‚¯: å®Ÿè¡Œæ¸ˆã¿
    - âœ… æ¨å¥¨ã‚»ãƒ¬ã‚¯ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³: é©ç”¨æ¸ˆã¿
    - âœ… ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³å“è³ª: æ¤œè¨¼æ¸ˆã¿
    - âœ… ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º: å®Ÿæ–½æ¸ˆã¿
    - âœ… æ‰‹å‹•ã‚¹ãƒ†ãƒƒãƒ—: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–æ¸ˆã¿
    
    è©³ç´°: `validation_results.log` ã‚’å‚ç…§
    
    ## ğŸ› æ—¢çŸ¥ã®åˆ¶ç´„äº‹é …
    
    1. **Notion `last_edited_time`**: ç§’å˜ä½ã§ã—ã‹æ›´æ–°ã•ã‚Œãªã„ãŸã‚ã€5åˆ†å¾…æ©ŸãŒå¿…è¦
    2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¾å­˜**: `nit pull` ã®å·®åˆ†æ¤œå‡ºã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå½±éŸ¿
    3. **Google SSO**: åˆå›èªè¨¼æ™‚ã¯æ‰‹å‹•æ“ä½œãŒå¿…è¦
    
    ## ğŸ’¡ æ”¹å–„ææ¡ˆ
    
    - IMP-008: `nit pull` ã®SHA1ãƒãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹å·®åˆ†æ¤œå‡º
    - IMP-009: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¿½åŠ 
    - Playwrightã‚»ãƒ¬ã‚¯ã‚¿ã® `data-testid` å±æ€§å°å…¥
    
    - name: "notify_completion"
      action: "display"
      content: |
    âœ… ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆä½œæˆå®Œäº†
    
    ğŸ“ ç”Ÿæˆå ´æ‰€: {{test_dir}}
    
    ğŸ” ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³çµæœ:
    - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {{validation_status}}
    - å“è³ªãƒ¬ãƒ™ãƒ«: {{validation_quality_level}}
    - ã‚¨ãƒ©ãƒ¼: {{validation_errors}}ä»¶
    - è­¦å‘Š: {{validation_warnings}}ä»¶
    
    ğŸ“ å³åº§ã«å®Ÿè¡Œå¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰:
    1. cd {{test_dir}}
    2. npm install
    3. npx playwright install chromium
    4. npm run test:scenario1  # Scenario 1å®Ÿè¡Œ
    
    ğŸ“ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å†å®Ÿè¡Œ:
    - bash scripts/validate_playwright_tests.sh
    - python3 scripts/validate_playwright_tests.py
    
    ğŸ“š é‡è¦ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:
    - README_INTEGRATION_TEST.md - å®Ÿè¡Œã‚¬ã‚¤ãƒ‰
    - MANUAL_VERIFICATION_GUIDE.md - æ‰‹å‹•æ¤œè¨¼æ‰‹é †
    - TEST_SUITE_SUMMARY.md - å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ
    
    ğŸ¯ ã“ã®ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã®ç‰¹å¾´:
    âœ“ å®Ÿè¨¼æ¸ˆã¿ã®Playwrightãƒ‘ã‚¿ãƒ¼ãƒ³æ¡ç”¨
    âœ“ ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆå½¢å¼ï¼ˆCLI + Playwright + Manualï¼‰
    âœ“ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä»˜ã
    âœ“ è©³ç´°ãªæ‰‹å‹•æ¤œè¨¼ã‚¬ã‚¤ãƒ‰
    âœ“ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ãªã©å®Ÿç’°å¢ƒã®å•é¡Œã«å¯¾å¿œ
```

---

## ãƒˆãƒªã‚¬ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
- `çµåˆãƒ†ã‚¹ãƒˆä½œæˆ`
- `çµ±åˆãƒ†ã‚¹ãƒˆä½œæˆ`
- `ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆä½œæˆ`
- `Integration Test Create`

## æˆæœç‰©
- Playwrightçµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆï¼ˆå®Œå…¨å‹•ä½œä¿è¨¼ï¼‰
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- æ‰‹å‹•æ¤œè¨¼ã‚¬ã‚¤ãƒ‰

## æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰
â†’ `11-4_çµåˆãƒ†ã‚¹ãƒˆå®Ÿæ–½` ã§å®Ÿéš›ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
â†’ `12_ãƒã‚°ç™»éŒ²` ã§ç™ºè¦‹ã—ãŸå•é¡Œã‚’è¨˜éŒ²

## å¤‰æ›´å±¥æ­´

### v2.2 (2025-10-16) - Playwrightã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æˆ¦ç•¥ã®å®Œå…¨ã‚¬ã‚¤ãƒ‰è¿½åŠ 
- **è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥**: UXæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ±ç”¨åŒ–
- **Notion DOMæ§‹é€ å¯¾å¿œ**: `.notion-bulleted_list-block`ç­‰ã®Notionå›ºæœ‰ã‚¯ãƒ©ã‚¹åå¯¾å¿œ
- **Strict Mode Violationå¯¾ç­–**: `.first()`ã®æ˜ç¤ºçš„ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- **è¦‹å‡ºã—ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼æˆ¦ç•¥**: `h2:has-text()`ã¨`:text()`ã®çµ„ã¿åˆã‚ã›
- **å®Ÿè¡Œã‚ªãƒ—ã‚·ãƒ§ãƒ³æœ€é©åŒ–**: `--project`æŒ‡å®šã«ã‚ˆã‚‹å†èªè¨¼å•é¡Œã®å›é¿
- **å®Ÿè£…ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: `findElementWithFallback`æ±ç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
- **ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**: ãƒ†ã‚¹ãƒˆä½œæˆãƒ»å®Ÿè¡Œãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ä½“ç³»åŒ–

### v2.1 (2025-10-15) - URLçµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ å¯¾å¿œ
- **URLçµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ **: `default_parent_url`ã‚’å”¯ä¸€ã®ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ä½¿ç”¨
- **çµ±ä¸€URLè§£æ±º**: `config.json` â†’ `NOTION_ROOT_URL` ã®2æ®µéšå„ªå…ˆé †ä½
- **è¤‡æ•°ç’°å¢ƒå¤‰æ•°ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: `TEST_PAGE_URL`, `ROOT_PAGE_URL`, `README_PAGE_URL`
- **å®Ÿè¨¼æ¸ˆã¿èªè¨¼ãƒ‘ã‚¿ãƒ¼ãƒ³**: ã€ŒDaisukeã¨ã—ã¦å®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã®è¤‡æ•°ã‚»ãƒ¬ã‚¯ã‚¿å¯¾å¿œ
- **è‡ªå‹•ç§»è¡Œã‚µãƒãƒ¼ãƒˆ**: æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è‡ªå‹•ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- **ãƒ¬ã‚¬ã‚·ãƒ¼äº’æ›æ€§**: æ—¢å­˜è¨­å®šã¨ã®äº’æ›æ€§ã‚’ä¿æŒ

### v2.0 (2025-10-14) - å®Ÿç”¨çš„ãªãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆå¯¾å¿œ
- **å®Ÿè¨¼æ¸ˆã¿ãƒ‘ã‚¿ãƒ¼ãƒ³æ¡ç”¨**: ä»Šå›ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§æˆåŠŸã—ãŸã‚³ãƒ¼ãƒ‰ã‚’åŸºã«å®Ÿè£…
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚¹ãƒˆ**: Cursor + Playwright + Manual ã®çµ„ã¿åˆã‚ã›
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½**: TypeScriptãƒã‚§ãƒƒã‚¯ã€ã‚»ãƒ¬ã‚¯ã‚¿ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œè¨¼
- **æ‰‹å‹•æ¤œè¨¼ã‚¬ã‚¤ãƒ‰**: è‡ªå‹•åŒ–å›°é›£ãªéƒ¨åˆ†ã®è©³ç´°æ‰‹é †
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†**: `nit pull` ã®å·®åˆ†æ¤œå‡ºå•é¡Œã«å¯¾å¿œ
- **å®Ÿç”¨çš„ãªè¨­å®š**: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ãƒªãƒˆãƒ©ã‚¤ã€ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šã‚’æœ€é©åŒ–
