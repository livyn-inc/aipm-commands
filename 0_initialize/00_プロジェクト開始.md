# 00 プロジェクト開始

## 目的
- Flowの日付フォルダ配下にコマンド別フォルダを事前生成（整理用）
- Stock側にプログラム/プロジェクト（アプリ名）の標準構造を生成
- 簡易プロジェクト憲章（README）をStockに作成
- 次のコマンドで参照できる初期化設定 `project_init.yaml` をFlowに保存

## 実行手順
```yaml
- trigger: "(プロジェクト開始|ProjectInit|InitProject)"
  priority: high
  steps:
    - name: "collect_init_info"
      action: "ask_questions_with_template"
      template: |
        === 初期化メタ情報 ===
        1) Program（デフォルト: AIPM_Hackathon）
        →
        2) Project（アプリ名。例: SmartTodo-Mama）
        →
        3) 参加者名（GitHub IDでも可）
        →
        4) アプリの目的（現時点の仮説）
        →
        5) 背景（なぜ作るのか）
        →
        6) 期間（開始→終了。例: 2025-09-13 → 2025-09-13）
        →
        7) Flowの作業ディレクトリ名（既定: hackathon_new）
        →
        
        === アプリ/サービス概要（確認） ===
        A1) どんなアプリ/サービスか（例: TODOアプリ, メモ, タイマー, 家計簿）
        →
        A2) メインユーザー（誰に向ける？ 例: 忙しい共働きママ）
        →
        A3) 一言サマリ（何ができて、どんな価値？ 例: 5分で次の一手が決まる）
        →
        =====================================
    
    - name: "wait_inputs"
      action: "wait_for_all_answers"
    
    - name: "confirm_init"
      action: "confirm"
      message: "Flow/Stock の構造を作成し、READMEと設定YAMLを出力します。よろしいですか？"
    
    - name: "show_parallel_shells"
      action: "display"
      content: |
        💻 実行環境メモ（Windows対応）
        下記は手動実行用の参考コマンドです。実際の自動処理は次ステップで行われます。

        Bash (macOS/Linux):
        ```bash
        # Flow 側（YYYYMM/日付/flow_dir 配下）
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/01_ペルソナ作成" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/02_課題定義" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/03_ソリューションマップ" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/04_ストーリーマップ" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/05_UIワイヤーフレーム" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/06_設計__Drawioスクリーン生成" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/07_開発タスク分解" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/08_チケット開始" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/09_チケット実行と検証" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/10_タスクリファイン" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/hackathon/発表__Marpスライド生成" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/hackathon/提出__成果物パッケージング" \
                 "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/hackathon/提出__GitHub提出"

        # Stock 側
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/01_ペルソナ作成" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/02_課題定義" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/03_ソリューションマップ" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/04_ストーリーマップ" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/05_UIワイヤーフレーム" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/06_設計__Drawioスクリーン生成" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/07_開発タスク分解" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/08_チケット開始" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/09_チケット実行と検証" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/10_タスクリファイン" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/hackathon/発表__Marpスライド生成" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/hackathon/提出__成果物パッケージング" \
                 "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/hackathon/提出__GitHub提出"
        ```

        PowerShell (Windows/macOSのpwsh):
        ```powershell
        $flow = "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}"
        $stock = "Stock/programs/{{program_id}}/projects/{{project_id}}/documents"
        $folders = @(
          "01_ペルソナ作成","02_課題定義","03_ソリューションマップ",
          "04_ストーリーマップ","05_UIワイヤーフレーム","06_設計__Drawioスクリーン生成",
          "07_開発タスク分解","08_チケット開始","09_チケット実行と検証",
          "10_タスクリファイン","hackathon/発表__Marpスライド生成","hackathon/提出__成果物パッケージング",
          "hackathon/提出__GitHub提出"
        )
        foreach($f in $folders){ New-Item -ItemType Directory -Path (Join-Path $flow $f) -Force | Out-Null }
        foreach($f in $folders){ New-Item -ItemType Directory -Path (Join-Path $stock $f) -Force | Out-Null }
        ```

    # 1) Flow配下のコマンド別フォルダ作成（.mdや@は付けない）
    - name: "create_flow_folders"
      action: "execute_shell"
      command: |
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/01_ペルソナ作成" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/02_課題定義" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/03_ソリューションマップ" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/04_ストーリーマップ" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/05_UIワイヤーフレーム" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/06_設計__Drawioスクリーン生成" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/07_開発タスク分解" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/08_チケット開始" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/09_チケット実行と検証" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/10_タスクリファイン" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/hackathon/発表__Marpスライド生成" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/hackathon/提出__成果物パッケージング" && \
        mkdir -p "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/hackathon/提出__GitHub提出"
    
    # 2) Stock配下のコマンド別フォルダ作成（Flowと同じ命名）
    - name: "create_stock_folders"
      action: "execute_shell"
      command: |
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/01_ペルソナ作成" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/02_課題定義" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/03_ソリューションマップ" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/04_ストーリーマップ" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/05_UIワイヤーフレーム" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/06_設計__Drawioスクリーン生成" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/07_開発タスク分解" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/08_チケット開始" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/09_チケット実行と検証" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/10_タスクリファイン" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/hackathon/発表__Marpスライド生成" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/hackathon/提出__成果物パッケージング" && \
        mkdir -p "Stock/programs/{{program_id}}/projects/{{project_id}}/documents/hackathon/提出__GitHub提出"
    
    # 3) Stock README（簡易プロジェクト憲章）
    - name: "create_stock_readme"
      action: "create_markdown_file"
      path: "Stock/programs/{{program_id}}/projects/{{project_id}}/README.md"
      content: |
        # {{project_id}}
        
        ## 概要（簡易プロジェクト憲章）
        - Program: {{program_id}}
        - Project: {{project_id}}
        - 参加者: {{participant_name}}
        - 期間: {{period}}
        
        ### 背景
        {{background}}
        
        ### 目的（現時点の仮説）
        {{purpose}}
        
        ### アプリ/サービス概要
        - 種類: {{app_type}}
        - メインユーザー: {{main_user}}
        - 一言サマリ: {{app_summary}}
        
        ### 構造
        - Flow 作業ルート: `Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/`
        - Stock ルート: `Stock/programs/{{program_id}}/projects/{{project_id}}/documents/`
        
        ### 次のステップ
        - `@01_ペルソナ作成` から開始
        - 成果物は 12/13 の提出コマンドで自動収集・提出
    
    # 4) Flow 設定ファイル（後続コマンドが参照）
    - name: "write_init_yaml"
      action: "create_markdown_file"
      path: "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/project_init.yaml"
      content: |
        program_id: {{program_id | default: "AIPM_Hackathon"}}
        project_id: {{project_id}}
        participant_name: {{participant_name}}
        flow_dir: {{flow_dir | default: "hackathon_new"}}
        flow_base: "Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}"
        stock_base: "Stock/programs/{{program_id}}/projects/{{project_id}}"
        period: {{period}}
        purpose: {{purpose}}
        background: {{background}}
        app_type: {{app_type}}
        main_user: {{main_user}}
        app_summary: {{app_summary}}
        share_repo: "libyn-inc/aipm-hackathon-share"
        share_local_dir: "Share/aipm-hackathon-share"
    
    - name: "notify"
      action: "display"
      content: |
        ✅ 初期化完了：
        - Flow: `Flow/{{today | slice: 0, 4}}{{today | slice: 5, 2}}/{{today}}/{{flow_dir}}/`
        - Stock: `Stock/programs/{{program_id}}/projects/{{project_id}}/documents/`
        - READMEを作成し、設定 `project_init.yaml` を保存しました。
        次は `@01_ペルソナ作成` を実行してください。
```

## 備考
- Program既定値は `AIPM_Hackathon`。必要に応じて変更可。
- Flow側フォルダ名は既定 `hackathon_new`。任意の名称にも対応。
